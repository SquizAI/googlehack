<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision Support AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white h-screen flex">
    <!-- Sidebar -->
    <div class="w-1/4 bg-gray-800 p-4 flex flex-col">
        <div class="flex items-center mb-6">
            <img id="user-avatar" src="{{ avatar }}" alt="User Avatar" class="w-10 h-10 rounded-full mr-3">
            <span id="user-name-display" class="text-xl font-bold">{{ username }}</span>
        </div>
        <nav class="flex-1">
            <ul>
                <li class="mb-4">
                    <a href="/" class="flex items-center text-blue-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                        </svg>
                        Home
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/investment" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H5v-2h7v2zm0-4H5v-2h7v2zm0-4H5V7h7v2zm7 8h-5v-2h5v2zm0-4h-5v-2h5v2zm0-4h-5V7h5v2z"/>
                        </svg>
                        Investment Assistant
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/stock" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14H5v-2h7v2zm0-4H5v-2h7v2zm0-4H5V7h7v2zm7 8h-5v-2h5v2zm0-4h-5v-2h5v2zm0-4h-5V7h5v2z"/>
                        </svg>
                        Stock Analysis
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/youtube-search" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.43 12.98c.04-.32.07-.66.07-1s-.03-.68-.07-1l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.62-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.487.487 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.57-1.69.98l-2.49-1a.504.504 0 0 0-.62.22l-2 3.46c-.12.22-.07.49.12.64l2.11 1.65c-.05.32-.07.66-.07 1s.03.68.07 1l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.62.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.57 1.69-.98l2.49 1c.23.08.5 0 .62-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/>
                        </svg>
                        YouTube Search
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/langchain-query" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm-1 14.93V19h2v-2.07a8.12 8.12 0 0 0 2.07-.57l1.48 1.48 1.41-1.41-1.48-1.48a8.12 8.12 0 0 0 .57-2.07H19v-2h-2.07a8.12 8.12 0 0 0-.57-2.07l1.48-1.48-1.41-1.41-1.48 1.48a8.12 8.12 0 0 0-2.07-.57V5h-2v2.07a8.12 8.12 0 0 0-2.07.57L7.93 6.66 6.52 8.07l1.48 1.48a8.12 8.12 0 0 0-.57 2.07H5v2h2.07a8.12 8.12 0 0 0 .57 2.07L6.66 16.07l1.41 1.41 1.48-1.48a8.12 8.12 0 0 0 2.07.57z"/>
                        </svg>
                        Langchain Query
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/settings" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19.43 12.98c.04-.32.07-.66.07-1s-.03-.68-.07-1l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.62-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.487.487 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.57-1.69.98l-2.49-1a.504.504 0 0 0-.62.22l-2 3.46c-.12.22-.07.49.12.64l2.11 1.65c-.05.32-.07.66-.07 1s.03.68.07 1l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.62.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.57 1.69-.98l2.49 1c.23.08.5 0 .62-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/>
                        </svg>
                        Settings
                    </a>
                </li>
                <li class="mb-4">
                    <a href="/logout" class="flex items-center text-gray-400 hover:bg-gray-700 p-2 rounded-lg">
                        <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M10.09 15.59L15.17 10.5H3v-1.5h12.17L10.09 3.41l1.41-1.41L18.5 9l-7.01 7.01-1.4-1.42z"/>
                        </svg>
                        Logout
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
        <header class="bg-gray-800 p-4 flex items-center justify-between">
            <div class="flex items-center">
                <img id="chat-avatar" src="{{ avatar }}" alt="Chat Avatar" class="w-10 h-10 rounded-full mr-3">
                <div>
                    <h2 id="chat-username" class="text-xl font-bold">Chat with AI</h2>
                    <p class="text-gray-400 text-sm">Online</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <select id="conversation-type-select" class="block p-2 bg-gray-700 border border-gray-600 rounded text-white">
                    <option value="" disabled selected>Select conversation type</option>
                    <option value="regular">Regular Chat</option>
                    <option value="investor">Investor Conversation</option>
                    <option value="educator">Educator Syllabus Builder</option>
                </select>
                <select id="framework-select" class="block p-2 bg-gray-700 border border-gray-600 rounded text-white">
                    <option value="" disabled selected>Select a framework</option>
                    <option value="rational">Rational Decision-Making</option>
                    <option value="bounded">Bounded Rationality</option>
                    <option value="intuitive">Intuitive Decision-Making</option>
                    <option value="decisionTree">Decision Tree</option>
                    <option value="pugh">Pugh Matrix</option>
                </select>
                <button id="stop-talking-btn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded hidden">Stop Talking</button>
            </div>
        </header>
        <div id="chat-container" class="flex-1 p-4 overflow-y-auto">
            <div id="messageHolder" class="space-y-4"></div>
        </div>
        <form id="chatForm" class="p-4 bg-gray-800 flex items-center gap-4">
            <textarea id="chat-input" class="flex-grow p-3 bg-gray-700 border border-gray-600 rounded-lg text-white resize-none" placeholder="Type your message here..." required></textarea>
            <button type="submit" id="send-btn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Send</button>
        </form>
        <div class="p-4 bg-gray-800 flex items-center gap-4 justify-between">
            <button id="start-record-btn" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg">Start Recording</button>
            <button id="stop-record-btn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg hidden">Stop Recording</button>
            <div class="flex items-center gap-2">
                <label for="speed-range" class="block text-sm font-medium text-gray-400">Speech Speed:</label>
                <input type="range" id="speed-range" min="0.5" max="2.0" step="0.1" value="1.0" class="w-full">
                <span id="speed-value" class="text-sm text-gray-400">1.0x</span>
            </div>
        </div>
        <div id="recording-indicator" class="absolute inset-x-0 bottom-16 flex items-center justify-center hidden">
            <div class="text-gray-400 text-lg ellipsis">Recording<span id="ellipsis"></span></div>
        </div>
        <div id="loading-indicator" class="absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 hidden">
            <div class="flex items-center gap-2">
                <div class="w-6 h-6 border-4 border-blue-500 border-t-transparent border-t-4 border-solid rounded-full animate-spin"></div>
                <span class="text-white text-lg">Thinking...</span>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

